<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>aerospike-clj.client documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Aerospike-clj</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="advanced-async-hooks.html"><div class="inner"><span># Advanced asynchronous hooks:</span></div></a></li><li class="depth-1 "><a href="implementing-clients.html"><div class="inner"><span># Implementing `IAerospikeClient`</span></div></a></li><li class="depth-1 "><a href="tutorial.html"><div class="inner"><span>Tutorial</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aerospike-clj</span></div></div></li><li class="depth-2 branch"><a href="aerospike-clj.aerospike-record.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aerospike-record</span></div></a></li><li class="depth-2 branch current"><a href="aerospike-clj.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-2 branch"><a href="aerospike-clj.key.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>key</span></div></a></li><li class="depth-2 branch"><a href="aerospike-clj.listeners.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>listeners</span></div></a></li><li class="depth-2 branch"><a href="aerospike-clj.metrics.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>metrics</span></div></a></li><li class="depth-2 branch"><a href="aerospike-clj.mock-client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mock-client</span></div></a></li><li class="depth-2 branch"><a href="aerospike-clj.policy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>policy</span></div></a></li><li class="depth-2"><a href="aerospike-clj.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="aerospike-clj.client.html#var-_get"><div class="inner"><span>_get</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-add-bins"><div class="inner"><span>add-bins</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-ClientEvents"><div class="inner"><span>ClientEvents</span></div></a></li><li class="depth-2 branch"><a href="aerospike-clj.client.html#var-on-failure"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>on-failure</span></div></a></li><li class="depth-2"><a href="aerospike-clj.client.html#var-on-success"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>on-success</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-create"><div class="inner"><span>create</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-create-client"><div class="inner"><span>create-client</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-create-event-loops"><div class="inner"><span>create-event-loops</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-delete"><div class="inner"><span>delete</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-delete-bins"><div class="inner"><span>delete-bins</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-EPOCH"><div class="inner"><span>EPOCH</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-exists-batch"><div class="inner"><span>exists-batch</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-exists.3F"><div class="inner"><span>exists?</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-expiry-unix"><div class="inner"><span>expiry-unix</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-get-batch"><div class="inner"><span>get-batch</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-get-cluster-stats"><div class="inner"><span>get-cluster-stats</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-get-multiple"><div class="inner"><span>get-multiple</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-get-nodes"><div class="inner"><span>get-nodes</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-get-single"><div class="inner"><span>get-single</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-get-single-no-meta"><div class="inner"><span>get-single-no-meta</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-healthy.3F"><div class="inner"><span>healthy?</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-IAerospikeClient"><div class="inner"><span>IAerospikeClient</span></div></a></li><li class="depth-2 branch"><a href="aerospike-clj.client.html#var-get-all-clients"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-all-clients</span></div></a></li><li class="depth-2"><a href="aerospike-clj.client.html#var-get-client"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>get-client</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-info"><div class="inner"><span>info</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-init-simple-aerospike-client"><div class="inner"><span>init-simple-aerospike-client</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-MAX_BIN_NAME_LENGTH"><div class="inner"><span>MAX_BIN_NAME_LENGTH</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-operate"><div class="inner"><span>operate</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-put"><div class="inner"><span>put</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-put-multiple"><div class="inner"><span>put-multiple</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-replace-only"><div class="inner"><span>replace-only</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-scan-set"><div class="inner"><span>scan-set</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-set-single"><div class="inner"><span>set-single</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-stop-aerospike-client"><div class="inner"><span>stop-aerospike-client</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-touch"><div class="inner"><span>touch</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="aerospike-clj.client.html#var-UserKey"><div class="inner"><span>UserKey</span></div></a></li><li class="depth-2"><a href="aerospike-clj.client.html#var-create-key"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>create-key</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">aerospike-clj.client</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-_get"><h3>_get</h3><div class="usage"><code>(_get db index set-name conf bin-names)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L173">view source</a></div></div><div class="public anchor" id="var-add-bins"><h3>add-bins</h3><div class="usage"><code>(add-bins db index set-name new-data new-expiration)</code><code>(add-bins db index set-name new-data new-expiration conf)</code></div><div class="doc"><div class="markdown"><p>Add bins to an existing record without modifying old data. The <code>new-data</code> must be a Clojure map.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L379">view source</a></div></div><div class="public anchor" id="var-ClientEvents"><h3>ClientEvents</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Continuation functions that are registered when an async DB operation is called. The DB passed is an <code>IAerospikeClient</code> instance. The value returned from those function will be the value of the returned deferred from the async operation.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-on-failure"><h3>on-failure</h3><div class="usage"><code>(on-failure _ op-name op-ex index op-start-time db)</code></div><div class="doc"><div class="markdown"><p>A continuation function. Registered on the operation future and called when operations fails.</p></div></div></div><div class="public anchor" id="var-on-success"><h3>on-success</h3><div class="usage"><code>(on-success _ op-name op-result index op-start-time db)</code></div><div class="doc"><div class="markdown"><p>A continuation function. Registered on the operation future and called when operations succeeds.</p></div></div></div></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L103">view source</a></div></div><div class="public anchor" id="var-create"><h3>create</h3><div class="usage"><code>(create db index set-name data expiration)</code><code>(create db index set-name data expiration conf)</code></div><div class="doc"><div class="markdown"><p><code>put</code> with a create-only policy</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L343">view source</a></div></div><div class="public anchor" id="var-create-client"><h3>create-client</h3><div class="usage"><code>(create-client host client-policy)</code><code>(create-client hosts client-policy port)</code></div><div class="doc"><div class="markdown"><p>Returns the Java <code>AerospikeClient</code> instance. To build the Clojure <code>IAerospikeClient</code> one, use <code>init-simple-aerospike-client</code>.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L43">view source</a></div></div><div class="public anchor" id="var-create-event-loops"><h3>create-event-loops</h3><div class="usage"><code>(create-event-loops conf)</code></div><div class="doc"><div class="markdown"><p>Called internally to create the event loops for the client. Can also be used to share event loops between several clients.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L53">view source</a></div></div><div class="public anchor" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete db index set-name)</code><code>(delete db index set-name conf)</code></div><div class="doc"><div class="markdown"><p>Delete the record stored for key <index>. Returns async true/false for deletion success (hit).</index></p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L407">view source</a></div></div><div class="public anchor" id="var-delete-bins"><h3>delete-bins</h3><div class="usage"><code>(delete-bins db index set-name bin-names new-expiration)</code><code>(delete-bins db index set-name bin-names new-expiration conf)</code></div><div class="doc"><div class="markdown"><p>Delete bins from an existing record. The <code>bin-names</code> must be a vector of strings.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L435">view source</a></div></div><div class="public anchor" id="var-EPOCH"><h3>EPOCH</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L21">view source</a></div></div><div class="public anchor" id="var-exists-batch"><h3>exists-batch</h3><div class="usage"><code>(exists-batch db indices)</code><code>(exists-batch db indices conf)</code></div><div class="doc"><div class="markdown"><p>Check for each key in a batch if it exists. <code>indices</code> is a collection of maps of the form <code>{:index "key-name" :set "set-name"}</code>. The result is a vector of booleans in the same order as indices.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L235">view source</a></div></div><div class="public anchor" id="var-exists.3F"><h3>exists?</h3><div class="usage"><code>(exists? db index set-name)</code><code>(exists? db index set-name conf)</code></div><div class="doc"><div class="markdown"><p>Test if an index exists.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L271">view source</a></div></div><div class="public anchor" id="var-expiry-unix"><h3>expiry-unix</h3><div class="usage"><code>(expiry-unix ttl)</code></div><div class="doc"><div class="markdown"><p>Used to convert Aerospike style returned TTLS to standard UNIX EPOCH.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L556">view source</a></div></div><div class="public anchor" id="var-get-batch"><h3>get-batch</h3><div class="usage"><code>(get-batch db batch-reads)</code><code>(get-batch db batch-reads conf)</code></div><div class="doc"><div class="markdown"><p>Get a batch of records from the cluster asynchronously. <code>batch-reads</code> is a collection of maps of the form <code>{:index "foo" :set "someset" :bins [...]}</code> the <code>:bins</code> key can have required bins for the batched keys or missing/[:all] to get all the bins (see <code>_get</code>). The result is a vector of <code>AerospikeRecord</code>s in the same order of keys. Missing keys result in <code>nil</code> in corresponding positions.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L212">view source</a></div></div><div class="public anchor" id="var-get-cluster-stats"><h3>get-cluster-stats</h3><div class="usage"><code>(get-cluster-stats db)</code></div><div class="doc"><div class="markdown"><p>For each client, return a vector of [metric-name metric-val] 2-tuples. The metric name is a dot separated string that should be convenient for reporting to statsd/graphite. All values are gauges.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L519">view source</a></div></div><div class="public anchor" id="var-get-multiple"><h3>get-multiple</h3><h4 class="deprecated">deprecated in 0.3.2</h4><div class="usage"><code>(get-multiple db indices sets)</code><code>(get-multiple db indices sets conf)</code></div><div class="doc"><div class="markdown"><p>DEPRECATED - use <code>get-batch</code> instead.</p>
<p>Returns a (future) sequence of AerospikeRecords returned by <code>get-single</code> with records in corresponding places to the required keys. Indices and sets should be sequences. The <code>conf</code> map is passed to all <code>get-single</code> invocations.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L257">view source</a></div></div><div class="public anchor" id="var-get-nodes"><h3>get-nodes</h3><div class="usage"><code>(get-nodes db)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L515">view source</a></div></div><div class="public anchor" id="var-get-single"><h3>get-single</h3><div class="usage"><code>(get-single db index set-name)</code><code>(get-single db index set-name conf)</code><code>(get-single db index set-name conf bin-names)</code></div><div class="doc"><div class="markdown"><p>Returns a single record: <code>(transcoder AerospikeRecord)</code>. The default transcoder is <code>identity</code>. Pass a <code>:policy</code> in <code>conf</code> to use a non-default <code>ReadPolicy</code></p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L198">view source</a></div></div><div class="public anchor" id="var-get-single-no-meta"><h3>get-single-no-meta</h3><div class="usage"><code>(get-single-no-meta db index set-name)</code><code>(get-single-no-meta db index set-name bin-names)</code></div><div class="doc"><div class="markdown"><p>Shorthand to return a single record payload only.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L285">view source</a></div></div><div class="public anchor" id="var-healthy.3F"><h3>healthy?</h3><div class="usage"><code>(healthy? db)</code><code>(healthy? db operation-timeout-ms)</code></div><div class="doc"><div class="markdown"><p>Returns true iff the cluster is reachable and can take reads and writes. Uses __health-check set to avoid data collisions. <code>operation-timeout-ms</code> is for total timeout of reads (default is 1s) including 2 retries so a small over estimation is advised to avoid false negatives.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L531">view source</a></div></div><div class="public anchor" id="var-IAerospikeClient"><h3>IAerospikeClient</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-get-all-clients"><h3>get-all-clients</h3><div class="usage"><code>(get-all-clients _)</code></div><div class="doc"><div class="markdown"><p>Returns a sequence of all AerospikeClient objects.</p></div></div></div><div class="public anchor" id="var-get-client"><h3>get-client</h3><div class="usage"><code>(get-client ac)</code><code>(get-client ac index)</code></div><div class="doc"><div class="markdown"><p>Returns the relevant AerospikeClient object for the specific shard</p></div></div></div></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L28">view source</a></div></div><div class="public anchor" id="var-info"><h3>info</h3><div class="usage"><code>(info db node info-commands)</code><code>(info db node info-commands conf)</code></div><div class="doc"><div class="markdown"><p>Asynchronously make info commands to a node. a node can be retreived from <code>get-nodes</code>. commands is a seq of strings available from <a href="https://www.aerospike.com/docs/reference/info/index.html">https://www.aerospike.com/docs/reference/info/index.html</a> the returned future conatains a map from and info command to its response. conf can contain {:policy InfoPolicy} </p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L496">view source</a></div></div><div class="public anchor" id="var-init-simple-aerospike-client"><h3>init-simple-aerospike-client</h3><div class="usage"><code>(init-simple-aerospike-client hosts aero-ns)</code><code>(init-simple-aerospike-client hosts aero-ns conf)</code></div><div class="doc"><div class="markdown"><p><code>hosts</code> should be a seq of known hosts to bootstrap from.</p>
<p>Optional <code>conf</code> map <em>can</em> have: - :event-loops - a client compatible EventLoops instance.  If no EventLoops instance is provided,  a single-threaded one of type NioEventLoops is created automatically.  The EventLoops instance for this client will be closed  during <code>stop-aerospike-client</code> iff it was not provided externally.  In this case it’s a responsibility of the owner to close it properly.</p>
<p>Client policy configuration keys (see policy/create-client-policy) - :client-policy - a ready ClientPolicy - “username” - :port (default is 3000) - :client-events an implementation of ClientEvents. Either a single one or a vector  thereof. In the case of a vector, the client will chain the instances by order.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L60">view source</a></div></div><div class="public anchor" id="var-MAX_BIN_NAME_LENGTH"><h3>MAX_BIN_NAME_LENGTH</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L26">view source</a></div></div><div class="public anchor" id="var-operate"><h3>operate</h3><div class="usage"><code>(operate db index set-name expiration operations)</code><code>(operate db index set-name expiration operations conf)</code></div><div class="doc"><div class="markdown"><p>Asynchronously perform multiple read/write operations on a single key in one batch call. This method registers the command with an event loop and returns. The event loop thread will process the command and send the results to the listener. <code>commands</code> is a sequence of Aerospike CDT operations.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L448">view source</a></div></div><div class="public anchor" id="var-put"><h3>put</h3><div class="usage"><code>(put db index set-name data expiration)</code><code>(put db index set-name data expiration conf)</code></div><div class="doc"><div class="markdown"><p>Writes <code>data</code> into a record with the key <code>index</code>, with the ttl of <code>expiration</code> seconds. <code>index</code> should be string. Pass a function in <code>(:trascoder conf)</code> to modify <code>data</code> before it is sent to the DB. Pass a <code>WritePolicy</code> in <code>(:policy conf)</code> to uses the non-default policy. When a Clojure map is provided for the <code>data</code> argument, a multiple bin record will be created. Each key-value pair in the map will be treated as a bin-name, bin-value pair. Bin-names must be strings. Bin-values can be any nested data structure.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L305">view source</a></div></div><div class="public anchor" id="var-put-multiple"><h3>put-multiple</h3><div class="usage"><code>(put-multiple db indices set-names payloads expirations)</code><code>(put-multiple db indices set-names payloads expirations conf)</code></div><div class="doc"><div class="markdown"><p>Put multiple payloads by invoking <code>put</code>. All arguments should be mutually corresponding sequences.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L321">view source</a></div></div><div class="public anchor" id="var-replace-only"><h3>replace-only</h3><div class="usage"><code>(replace-only db index set-name data expiration)</code><code>(replace-only db index set-name data expiration conf)</code></div><div class="doc"><div class="markdown"><p><code>put</code> with a replace-only policy</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L354">view source</a></div></div><div class="public anchor" id="var-scan-set"><h3>scan-set</h3><div class="usage"><code>(scan-set db aero-namespace set-name conf)</code></div><div class="doc"><div class="markdown"><p>Scans through the given set and calls a user defined callback for each record that was found. Returns a deferred response that resolves once the scan completes. When the scan completes successfully it returns <code>true</code>. The scan may be aborted by returning :abort-scan from the callback. In that case the return value is <code>false</code>.</p>
<p>The <code>conf</code> argument should be a map with the following keys: :callback - Function that accepts a com.aerospike.client.Value and an AerospikeRecord. :policy - Optional. com.aerospike.client.policy.ScanPolicy. :bins - Optional. Vector of bin names to return. Returns all bins by default.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L469">view source</a></div></div><div class="public anchor" id="var-set-single"><h3>set-single</h3><div class="usage"><code>(set-single db index set-name data expiration)</code><code>(set-single db index set-name data expiration conf)</code></div><div class="doc"><div class="markdown"><p><code>put</code> with an update policy</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L332">view source</a></div></div><div class="public anchor" id="var-stop-aerospike-client"><h3>stop-aerospike-client</h3><div class="usage"><code>(stop-aerospike-client db)</code></div><div class="doc"><div class="markdown"><p>Gracefully stop a client, waiting until all async operations finish. The underlying EventLoops instance is closed iff it was not provided externally.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L92">view source</a></div></div><div class="public anchor" id="var-touch"><h3>touch</h3><div class="usage"><code>(touch db index set-name expiration)</code></div><div class="doc"><div class="markdown"><p>Updates the ttl of the record stored under at <code>index</code> to <code>expiration</code> seconds from now. Expects records to exist.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L391">view source</a></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update db index set-name new-record generation new-expiration)</code><code>(update db index set-name new-record generation new-expiration conf)</code></div><div class="doc"><div class="markdown"><p>Writing a new value for the key <code>index</code>. Generation: the expected modification count of the record (i.e. how many times was it modified before my current action). Pass a function in <code>(:trascoder conf)</code> to modify <code>data</code> before it is sent to the DB.</p></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L365">view source</a></div></div><div class="public anchor" id="var-UserKey"><h3>UserKey</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Use <code>create-key</code> directly to pass a premade custom key to the public API. When passing a simple String/Integer/Long/ByteArray the key will be created automatically for you. If you pass a ready made key, <code>as-namespace</code> and <code>set-name</code> are ignored in API calls.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-create-key"><h3>create-key</h3><div class="usage"><code>(create-key this as-namespace set-name)</code></div><div class="doc"><div class="markdown"></div></div></div></div></div><div class="src-link"><a href="http://github.com/AppsFlyer/aerospike-clj/blob/1.0.0/src/main/clojure/aerospike_clj/client.clj#L123">view source</a></div></div></div></body></html>